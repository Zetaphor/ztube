<div id="videoPlayer" class="hidden w-full">
  <div class="relative w-full max-w-7xl mx-auto flex flex-col md:flex-row gap-4 pt-1">
    <button id="closePlayer"
      class="absolute top-0 right-0 mt-2 mr-2 text-white text-2xl z-10 green-500 bg-zinc-800 rounded-full p-1 hover:bg-red-600">
      <i class="fas fa-times"></i>
    </button>

    <!-- Main Content Area (Player, Info, Comments) -->
    <div id="mainPlayerContent" class="flex-grow w-full md:w-2/3 mt-1">
      <div id="videoAreaContainer" class="bg-black rounded-t-lg overflow-hidden flex flex-col flex-grow">
        <div id="player" class="w-full yt-player-container flex-grow"></div>
        <!-- Custom control bar (styling primarily in style.css) -->
        <div id="customControls" class="bg-zinc-800 bg-opacity-80 p-2 flex items-center space-x-4">
          <button id="playPauseBtn" class="text-white hover:text-green-500">
            <i class="fas fa-play"></i>
          </button>
          <div class="flex-1 flex flex-col">
            <div class="relative">
              <div id="progressBar" class="h-1 bg-zinc-700 rounded cursor-pointer">
                <div id="progress" class="h-full bg-green-600 rounded" style="width: 0%"></div>
                <div id="segmentMarkers" class="absolute inset-0 pointer-events-none"></div>
              </div>
            </div>
            <div class="flex justify-between text-xs text-zinc-400 mt-1 px-1">
              <span id="currentTime">0:00</span>
              <span id="duration">0:00</span>
            </div>
          </div>
          <div class="flex items-center gap-3 flex-shrink-0 volume-controls">
            <div class="relative volume-icon">
              <button id="volumeBtn" class="text-white hover:text-green-500">
                <i class="fas fa-volume-up"></i>
              </button>
            </div>
            <div id="volumeSlider" class="w-16 h-1 bg-zinc-700 rounded cursor-pointer ml-2">
              <div id="volumeLevel" class="h-full rounded" style="width: 100%"></div>
            </div>
            <div class="group relative speed-controls">
              <button id="playbackSpeedBtn" class="text-white hover:text-green-500">
                <i class="fas fa-tachometer-alt"></i>
              </button>
              <div id="speedOptions"
                class="hidden absolute bottom-full right-0 mb-2 bg-zinc-800 bg-opacity-90 rounded py-1">
                <div class="text-white text-sm px-4 py-1 hover:bg-green-600 cursor-pointer" data-speed="0.25">0.25x
                </div>
                <div class="text-white text-sm px-4 py-1 hover:bg-green-600 cursor-pointer" data-speed="0.5">0.5x</div>
                <div class="text-white text-sm px-4 py-1 hover:bg-green-600 cursor-pointer" data-speed="1"
                  id="normalSpeed">1x</div>
                <div class="text-white text-sm px-4 py-1 hover:bg-green-600 cursor-pointer" data-speed="1.5">1.5x</div>
                <div class="text-white text-sm px-4 py-1 hover:bg-green-600 cursor-pointer" data-speed="2">2x</div>
              </div>
            </div>
            <!-- Video Quality Selector -->
            <div class="group relative quality-controls">
              <button id="qualityBtn"
                class="text-white hover:text-green-500 text-sm px-2 min-w-[50px] cursor-default">Auto</button>
            </div>
            <!-- End Video Quality Selector -->
            <button id="theaterModeBtn" class="text-white hover:text-green-500">
              <i class="fas fa-film"></i>
            </button>
            <button id="fullscreenBtn" class="text-white hover:text-green-500">
              <i class="fas fa-expand"></i>
            </button>
          </div>
        </div>
      </div>
      <!-- Chapters Accordion -->
      <div id="chaptersAccordion" class="hidden bg-zinc-800">
        <div id="chaptersHeader" class="cursor-pointer bg-zinc-700 p-3 flex justify-between items-center">
          <i class="fas fa-list-ol text-md"></i>
          <span id="currentChapterTitle" class="text-lg text-zinc-300 mr-2"></span>
          <i id="chapterToggleIcon" class="fas fa-chevron-down"></i>
        </div>
        <div id="chaptersList" class="hidden bg-zinc-750 max-h-60 overflow-y-auto">
          <!-- Chapter items will be added here by JS -->
        </div>
      </div>
      <!-- End Chapters Accordion -->
      <div id="videoInfo" class="bg-zinc-800 p-6 rounded-b-lg mt-0 border-t border-zinc-700">
        <div class="flex justify-between items-center mb-4">
          <h2 id="videoTitle" class="text-xl font-bold flex-1 text-zinc-100"></h2>
        </div>
        <div class="flex items-start justify-between mb-4">
          <div class="flex items-start">
            <a id="channelAvatarLink" href="#" class="mr-3 flex-shrink-0">
              <img id="channelAvatar" class="w-12 h-12 rounded-full" src="" alt="Channel avatar">
            </a>
            <div>
              <a id="channelName" href="#" class="font-medium text-lg text-zinc-200 hover:text-green-500 block"></a>
              <p id="subscriberCount" class="text-zinc-400 text-sm mb-2"></p>
              <button id="videoPlayerSubscribeBtn"
                class="px-3 py-1 rounded bg-zinc-600 hover:bg-zinc-500 text-white font-medium text-xs transition-colors mr-2"
                data-channel-id="" data-channel-name="" data-channel-avatar="">
                Subscribe
              </button>
              <button id="addToPlaylistBtnPlayer"
                class="px-3 py-1 rounded bg-zinc-600 hover:bg-zinc-500 text-white font-medium text-xs transition-colors"
                title="Add to Playlist">
                <i class="fas fa-plus"></i> Add to Playlist
              </button>
            </div>
          </div>
          <div class="text-right flex-shrink-0 ml-4">
            <div id="viewCount" class="font-medium text-zinc-200"></div>
            <div id="uploadDate" class="text-zinc-400 text-sm"></div>
          </div>
        </div>
        <div id="videoDescription"
          class="text-zinc-300 whitespace-pre-wrap mb-8 border-t border-b border-zinc-700 py-4 max-h-48 overflow-y-auto">
        </div>
        <!-- Comments Section -->
        <div id="commentsSection" class="mt-6">
          <h3 class="text-lg font-semibold mb-4">Comments</h3>
          <div id="commentsList" class="space-y-4 max-h-[400px] overflow-y-auto pr-2">
            <!-- Comments will be dynamically loaded here -->
          </div>
          <button id="loadMoreComments" class="mt-4 text-green-500 hover:text-green-400 font-medium hidden">
            Load More Comments
          </button>
        </div>
      </div>
    </div>

    <!-- Recommended Videos Sidebar -->
    <div id="recommendedVideos"
      class="w-full md:w-1/3 bg-zinc-800 rounded-lg p-4 flex-shrink-0 max-h-[85vh] overflow-y-auto mt-1">
      <h3 class="text-lg font-semibold mb-4 text-zinc-100">Related Videos</h3>
      <!-- Recommended videos will be loaded here by JS -->
      <div class="space-y-3">
        <!-- Placeholder for loading state or empty state -->
        <p class="text-zinc-400 text-sm">Loading recommendations...</p>
      </div>
    </div>

  </div>
</div>